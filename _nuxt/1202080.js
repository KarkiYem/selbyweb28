(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{445:function(e,t,n){var content=n(603);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("25b06c15",content,!0,{sourceMap:!1})},598:function(e,t,n){e.exports=n.p+"img/selby_logo_color.09ea83c.svg"},599:function(e,t,n){e.exports=n.p+"img/banner.e5b7ad0.svg"},600:function(e,t,n){e.exports=n.p+"img/google.e12914a.png"},601:function(e,t,n){e.exports=n.p+"img/facebook.49e67d4.png"},602:function(e,t,n){"use strict";n(445)},603:function(e,t,n){var o=n(17)((function(i){return i[1]}));o.push([e.i,"button[data-v-21bd9370]{background-color:#007bff;border:none;border-radius:4px;color:#fff;cursor:pointer;padding:10px;width:100%}button[data-v-21bd9370]:hover{background-color:#0056b3}.selbyLogin[data-v-21bd9370]{border:1px dotted;border-radius:10px;display:flex;flex-wrap:wrap;height:720px;justify-content:center;margin:2rem 15px;padding:0 20px;width:400px}.logo[data-v-21bd9370]{width:200px}.banner[data-v-21bd9370]{height:300px;-o-object-fit:contain;object-fit:contain;width:80%}.selbyLogin input[data-v-21bd9370]{border:1px solid grey;border-radius:5px;height:2.7rem;padding:0 10px;width:100%}input[type=text][data-v-21bd9370]:focus{border:1px solid grey;outline:none}.gdiv[data-v-21bd9370]{align-items:center;border-radius:50%;box-shadow:0 4px 8px rgba(0,0,0,.2);display:flex;height:40px;justify-content:center;width:40px}.google[data-v-21bd9370]{cursor:pointer;width:26px}",""]),o.locals={},e.exports=o},855:function(e,t,n){"use strict";n.r(t);var o=n(7),r=n(30),c=(n(36),n(149)),l=n(33),d=n(42),h=n(158),m=n(44),f=n(101),v={layout:"default2",middleware:["isAuth"],data:function(){var e;return e={phone:"",otp:"",otpSent:!1,email:"",password:""},Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(e,"phone",""),"appVerifier",""),"at",[]),"us",[]),"user",null),"datas",{}),"sin",!1),"time",!1),"totalTime",120),"remainingTime",120),Object(r.a)(e,"interval",null)},computed:{formattedTime:function(){var e=Math.floor(this.remainingTime/60),t=this.remainingTime%60;return"".concat(e,":").concat(t<10?"0":"").concat(t)}},methods:{loginWithFacebook:function(){return Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.signInWithPopup(l.c);case 3:t=e.sent,t.credential.accessToken,t.user,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error during Facebook login:",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},googleLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.prev=1,t.next=4,Object(c.b)();case 4:n.user=t.sent,o=1;try{m.a.collection("user_Phone_Google_Fb_Login").getFirstListItem('userId="'.concat(n.user.email,'"'))}catch(e){o=0}if(0!=o){t.next=13;break}return data={userId:n.user.email,email:n.user.email,phone:"",name:"Selby User",about:"",login_type:"Google_Auth",subscription:[],active:!0,block:!1,free_ad:1,notification_id:""},t.next=11,m.a.collection("user_Phone_Google_Fb_Login").create(data).then((function(){Object(h.Message)({showClose:!0,message:"Logged in successfully!",type:"success"}),f.set("setUser",n.user.email),n.$store.commit("phone",n.user.email),history.back()}));case 11:t.next=17;break;case 13:Object(h.Message)({showClose:!0,message:"Logged in successfully!",type:"success"}),f.set("setUser",n.user.email),n.$store.commit("phone",n.user.email),history.back();case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),Object(h.Message)({showClose:!0,message:"Something went wrong!",type:"error"});case 22:case"end":return t.stop()}}),t,null,[[1,19]])})))()},sendOtp:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(10==(n=e).phone.length){t.next=5;break}Object(h.Message)({showClose:!0,message:"Phone Number is Invalid!",type:"warning"}),t.next=12;break;case 5:return data={phone:n.phone},o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)},t.next=10,fetch("https://selby.in/api/sendOtp",o);case 10:t.sent.ok?(n.sin=!0,n.time=!0,n.startCountdown(),Object(h.Message)({showClose:!0,message:"Otp sent Succcessfully!",type:"success"})):Object(h.Message)({showClose:!0,message:"Otp not sent!",type:"warning"});case 12:case"end":return t.stop()}}),t)})))()},verifyOtp:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,i,o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(6!=(n=e).otp.length){t.next=27;break}return i=1,t.prev=3,t.next=6,m.a.collection("otp").getFirstListItem('phone="'.concat(n.phone,'" && otp="').concat(n.otp,'"'),{});case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),i=0,Object(h.Message)({showClose:!0,message:"Invalid Otp!",type:"warning"});case 12:if(1!=i){t.next=25;break}o=1;try{m.a.collection("user_Phone_Google_Fb_Login").getFirstListItem('userId="'.concat(n.phone,'"'))}catch(e){o=0}if(0!=o){t.next=21;break}return data={userId:n.phone,email:"",phone:n.phone,name:"Selby User",about:"",login_type:"Phone_Auth",subscription:[],active:!0,block:!1,free_ad:1,notification_id:""},t.next=19,m.a.collection("user_Phone_Google_Fb_Login").create(data).then((function(){Object(h.Message)({showClose:!0,message:"Logged in successfully!",type:"success"}),f.set("setUser",n.phone),n.$store.commit("phone",n.phone),history.back()}));case 19:t.next=25;break;case 21:Object(h.Message)({showClose:!0,message:"Logged in successfully!",type:"success"}),f.set("setUser",n.phone),n.$store.commit("phone",n.phone),history.back();case 25:t.next=28;break;case 27:Object(h.Message)({showClose:!0,message:"Invalid Otp!",type:"warning"});case 28:case"end":return t.stop()}}),t,null,[[3,8]])})))()},startCountdown:function(){var e=this;this.interval=setInterval((function(){e.remainingTime>0?e.remainingTime--:(clearInterval(e.interval),e.time=!1,e.$emit("countdown-finished"))}),1e3)}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.user=d.a.auth().currentUser,d.a.auth().onAuthStateChanged((function(t){e.user=t}));case 2:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){clearInterval(this.interval)}},y=(n(602),n(12)),component=Object(y.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex",height:"100vh","justify-content":"center"}},[t("div",{staticClass:"selbyLogin"},[t("img",{staticClass:"logo",attrs:{src:n(598)}}),e._v(" "),t("img",{staticClass:"banner",attrs:{src:n(599)}}),e._v(" "),0==e.sin?t("div",{staticStyle:{width:"100%"}},[t("h3",{staticStyle:{"font-size":"25px","font-weight":"700"}},[e._v("SIGN UP/LOGIN")]),e._v(" "),t("p",{staticStyle:{"font-size":"13px","font-weight":"600"}},[e._v("\n        6 Digit OTP will be sent via SMS to verify your phone number.\n      ")])]):e._e(),e._v(" "),1==e.sin?t("div",{staticStyle:{width:"100%"}},[t("h3",{staticStyle:{"font-size":"25px","font-weight":"700"}},[e._v("VERIFY OTP")]),e._v(" "),t("p",{staticStyle:{"font-size":"13px","font-weight":"600"}},[e._v("\n        6 Digit code has been sent to +91"+e._s(e.phone)+".\n      ")])]):e._e(),e._v(" "),0==e.sin?t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"text",id:"phone",placeholder:"Enter your phone number"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}):e._e(),e._v(" "),1==e.sin?t("input",{directives:[{name:"model",rawName:"v-model",value:e.otp,expression:"otp"}],attrs:{type:"text",id:"otp",placeholder:"Enter 6 Digit OTP"},domProps:{value:e.otp},on:{input:function(t){t.target.composing||(e.otp=t.target.value)}}}):e._e(),e._v(" "),1==e.sin&&0==e.time?t("h3",{staticStyle:{"font-size":"15px","font-weight":"500"}},[e._v("\n      Didn't recieve code ?\n      "),t("span",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:e.sendOtp}},[e._v("Resend")])]):e._e(),e._v(" "),1==e.sin&&1==e.time?t("h3",{staticStyle:{"font-size":"15px","font-weight":"500"}},[e._v("\n      Time Remaining: "+e._s(e.formattedTime)+"\n    ")]):e._e(),e._v(" "),0==e.sin?t("button",{staticStyle:{height:"2.7rem"},on:{click:e.sendOtp}},[e._v("\n      Send OTP\n    ")]):e._e(),e._v(" "),1==e.sin?t("button",{staticStyle:{height:"2.7rem"},on:{click:e.verifyOtp}},[e._v("\n      Submit\n    ")]):e._e(),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"gdiv"},[t("img",{staticClass:"google",attrs:{src:n(600)},on:{click:function(t){return e.googleLogin()}}})]),e._v(" "),t("div",{staticClass:"gdiv ml-4"},[t("img",{staticClass:"google",attrs:{src:n(601)},on:{click:function(t){return e.loginWithFacebook()}}})])])])}),[function(){var e=this._self._c;return e("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[e("h3",{staticStyle:{"font-size":"17px","font-weight":"700"}},[this._v("OR")])])}],!1,null,"21bd9370",null);t.default=component.exports}}]);