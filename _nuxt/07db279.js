(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{459:function(e,t,n){var content=n(631);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("a03fe9f8",content,!0,{sourceMap:!1})},630:function(e,t,n){"use strict";n(459)},631:function(e,t,n){var r=n(17)((function(i){return i[1]}));r.push([e.i,'p[data-v-9e8f4c96]{margin:0;padding:0}.main-container[data-v-9e8f4c96]{display:flex;flex-direction:row;font-family:"Arial",sans-serif;margin:0 auto;min-height:100vh;width:40%}.sidebar[data-v-9e8f4c96]{background-color:#f0f0f0;border-right:1px solid #ccc;display:flex;flex-direction:column;overflow-y:scroll;width:30%}.sidebar[data-v-9e8f4c96]::-webkit-scrollbar{display:none}.sidebar[data-v-9e8f4c96]{-ms-overflow-style:none;scrollbar-width:none}.sidebar-header[data-v-9e8f4c96]{background-color:#1877f2;color:#fff;padding:20px;text-align:center}.contact-list[data-v-9e8f4c96]{flex:1;overflow-y:auto}.contact-item[data-v-9e8f4c96]{align-items:center;cursor:pointer;display:flex;padding:10px;transition:background-color .2s}.contact-item[data-v-9e8f4c96]:hover{background-color:#ddd}.contact-item .avatar[data-v-9e8f4c96]{border-radius:50%;height:40px;margin-right:10px;width:40px}.contact-item h4[data-v-9e8f4c96]{font-size:16px;margin:0}.chat-container[data-v-9e8f4c96]{display:flex;flex:1;flex-direction:column}.chat-header[data-v-9e8f4c96]{align-items:center;background-color:#1877f2;color:#fff;display:flex;padding:10px}.chat-window[data-v-9e8f4c96]{background-color:#f8f9fa;flex:1;max-height:85vh;overflow-y:auto;padding:10px}.chat-message[data-v-9e8f4c96]{display:flex;margin-bottom:10px}.chat-message.sent[data-v-9e8f4c96]{justify-content:flex-end}.chat-message.received[data-v-9e8f4c96]{justify-content:flex-start;max-width:70%}.message-bubble[data-v-9e8f4c96]{font-size:14px;height:-moz-fit-content;height:fit-content;margin-bottom:6px;margin-top:6px;max-width:70%;min-height:-moz-fit-content;min-height:fit-content;padding:10px 10px 0;position:relative}.sent .message-bubble[data-v-9e8f4c96]{background-color:#1877f2;border-radius:50px;border-bottom-right-radius:0;color:#fff;padding:5px 10px}.received .message-bubble[data-v-9e8f4c96]{background-color:#f1f1f1;border-radius:50px;border-bottom-left-radius:0;color:#2c2c2c;padding:5px 10px}.sent .message-time[data-v-9e8f4c96]{left:-50px}.received .message-time[data-v-9e8f4c96],.sent .message-time[data-v-9e8f4c96]{color:#999;font-size:10px;position:absolute;top:30%}.received .message-time[data-v-9e8f4c96]{right:-50px}.chat-input[data-v-9e8f4c96]{background-color:#fff;border-top:1px solid #ddd;display:flex;padding:10px}.chat-input input[data-v-9e8f4c96]{border:1px solid #ddd;border-radius:20px;flex:1;margin-right:10px;padding:10px}.chat-input button[data-v-9e8f4c96]{background-color:#0866ff;border-radius:3px;color:#fff;cursor:pointer}@media screen and (max-width:768px){.main-container[data-v-9e8f4c96]{flex-direction:column;margin:0 auto;min-height:100vh;width:100%}.sidebar[data-v-9e8f4c96]{border-bottom:1px solid #ccc;border-right:none;height:auto}.chat-container[data-v-9e8f4c96],.sidebar[data-v-9e8f4c96]{width:100%}.contact-item h4[data-v-9e8f4c96]{font-size:14px}.chat-header h3[data-v-9e8f4c96]{font-size:16px}.message-bubble[data-v-9e8f4c96]{font-size:10px}.message-time[data-v-9e8f4c96]{font-size:7px}}@media screen and (max-width:480px){.main-container[data-v-9e8f4c96]{margin:0 auto;width:100%}.sidebar-header[data-v-9e8f4c96]{padding:15px}.contact-item .avatar[data-v-9e8f4c96]{height:30px;width:30px}.chat-header h3[data-v-9e8f4c96]{font-size:14px}.chat-input input[data-v-9e8f4c96]{font-size:14px;padding:8px}}',""]),r.locals={},e.exports=r},868:function(e,t,n){"use strict";n.r(t);var r=n(7),o=(n(36),n(44)),c={layout:"default2",middleware:["CheckUser"],data:function(){return{contacts:[],messages:[],details:{id:"",person1:"",person2:"",ad_id:"",name1:"",name2:"",image:"",block:!0},newMessage:"",activeChat:null}},mounted:function(){this.getData(),this.getData2()},methods:{sendMessage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var time,n,r,c,d,f,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e.newMessage.trim()){t.next=13;break}return time=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),n=new Date,r=n.getFullYear(),c=n.getMonth()+1,d=n.getDate(),f="".concat(d,"-").concat(c,"-").concat(r),data={chat_id:e.details.id,msg:e.newMessage,date:f,time:time,read:!1,sent_by:e.$store.state.phone,msg_type:"Text"},t.next=10,o.a.collection("chat_msgs").create(data);case 10:e.newMessage="",e.scrollToBottom(),e.getData();case 13:case"end":return t.stop()}}),t)})))()},scrollToBottom:function(){var e=this;this.$nextTick((function(){var t=e.$refs.chatWindow;t.scrollTop=t.scrollHeight}))},getData2:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(n=e).$route.params.id,t.next=4,o.a.collection("chat").getOne("".concat(r),{});case 4:n.details=t.sent;case 5:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,o.a.collection("chat_msgs").getFullList({filter:'chat_id = "'.concat(n,'" ')});case 3:e.messages=t.sent;case 4:case"end":return t.stop()}}),t)})))()}}},d=(n(630),n(12)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[t("div",{staticClass:"chat-container"},[t("div",{staticClass:"chat-header"},[t("div",{staticClass:"chat-header-details",staticStyle:{display:"flex","align-items":"center"}},[t("mdicon",{attrs:{name:"arrow-left"}}),e._v(" "),t("h6",{staticStyle:{"font-weight":"600",padding:"0",margin:"0"}},[e._v("\n             Chat\n        ")])],1)]),e._v(" "),t("div",{ref:"chatWindow",staticClass:"chat-window"},e._l(e.messages,(function(n,r){return t("div",{key:r,class:["chat-message",n.sent_by===e.$store.state.phone?"sent":"received"]},[t("div",{staticClass:"message-bubble"},[t("p",{staticClass:"message-text"},[e._v(e._s(n.msg))]),e._v(" "),t("span",{staticClass:"message-time"},[e._v(e._s(n.time))])])])})),0),e._v(" "),t("div",{staticClass:"chat-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text",placeholder:"Send a message..."},domProps:{value:e.newMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e._v(" "),t("button",{staticClass:"btn",on:{click:e.sendMessage}},[t("mdicon",{attrs:{name:"send"}})],1)])])])}),[],!1,null,"9e8f4c96",null);t.default=component.exports}}]);